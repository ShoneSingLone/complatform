{"version":3,"file":"ProjectInterface.40fc9582.js","sources":["../../src/containers/Project/Interface/DialogUpsertCategory.tsx","../../src/compositions/useDomResize.ts","../../src/containers/Project/Interface/DialogAddInterface.tsx","../../src/containers/Project/Interface/ProjectInterfaceLeftSider.tsx","../../src/containers/Project/Interface/ProjectInterface.tsx"],"sourcesContent":["import { validateForm, AllWasWell, pickValueFrom, UI } from \"@ventose/ui\";\nimport { defItem, xU, FormRules, setValueTo } from \"@ventose/ui\";\nimport { defineComponent } from \"vue\";\nimport { API } from \"../../../api\";\nimport { State_App } from \"../../../state/State_App\";\nimport { Methods_Project } from \"./State_Project\";\n\nexport const DialogUpsertCategory = defineComponent({\n\tprops: {\n\t\t/* Dialog 默认传入参数 */\n\t\tpropDialogOptions: {\n\t\t\ttype: Object,\n\t\t\tdefault() {\n\t\t\t\treturn { __elId: false };\n\t\t\t}\n\t\t}\n\t},\n\tsetup() {\n\t\treturn { State_App };\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tdataXItem: {\n\t\t\t\t...defItem({\n\t\t\t\t\tvalue: \"\",\n\t\t\t\t\tprop: \"name\",\n\t\t\t\t\tlabel: \"分类名\",\n\t\t\t\t\tplaceholder: \"分类名称\",\n\t\t\t\t\trules: [FormRules.required(\"请输入分类名称!\")]\n\t\t\t\t}),\n\t\t\t\t...defItem({\n\t\t\t\t\tvalue: \"\",\n\t\t\t\t\tprop: \"desc\",\n\t\t\t\t\tlabel: \"备注\",\n\t\t\t\t\tisTextarea: true,\n\t\t\t\t\tshowCount: true,\n\t\t\t\t\tmaxlength: 144\n\t\t\t\t})\n\t\t\t}\n\t\t};\n\t},\n\tmounted() {\n\t\tthis.propDialogOptions.vm = this;\n\t\tthis.initForm();\n\t},\n\tcomputed: {\n\t\tcategory() {\n\t\t\tif (this.propDialogOptions.category) {\n\t\t\t\treturn this.propDialogOptions.category;\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t},\n\tmethods: {\n\t\tinitForm() {\n\t\t\tif (this.category) {\n\t\t\t\tsetValueTo(this.dataXItem, this.category);\n\t\t\t}\n\t\t},\n\t\tasync onOk() {\n\t\t\tconst validateResults = await validateForm(this.dataXItem);\n\t\t\tif (AllWasWell(validateResults)) {\n\t\t\t\tconst { name, desc } = pickValueFrom(this.dataXItem);\n\t\t\t\tconst project_id = this.State_App.currProject._id;\n\t\t\t\ttry {\n\t\t\t\t\tif (this.category) {\n\t\t\t\t\t\tawait this.updateOldCategory({ name, desc, project_id });\n\t\t\t\t\t} else {\n\t\t\t\t\t\tawait this.insertNewCategory({ name, desc, project_id });\n\t\t\t\t\t}\n\t\t\t\t\tMethods_Project.updateInterfaceMenuList();\n\t\t\t\t\tthis.propDialogOptions.closeDialog();\n\t\t\t\t} catch (error) {\n\t\t\t\t\tif (this.category) {\n\t\t\t\t\t\tUI.message.error(this.$t(\"修改_失败\", { title: \"分类\" }).label);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tUI.message.error(this.$t(\"添加_失败\", { title: \"分类\" }).label);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tasync insertNewCategory({ name, desc, project_id }) {\n\t\t\tconst res = await API.project.addInterfaceCategory({\n\t\t\t\tproject_id,\n\t\t\t\tname,\n\t\t\t\tdesc\n\t\t\t});\n\t\t\tif (res) {\n\t\t\t\tUI.message.success(this.$t(\"添加_成功\", { title: \"分类\" }).label);\n\t\t\t} else {\n\t\t\t\tthrow new Error(\"\");\n\t\t\t}\n\t\t},\n\t\tasync updateOldCategory({ name, desc, project_id }) {\n\t\t\tconst res = await API.project.updateInterfaceCategory({\n\t\t\t\tproject_id,\n\t\t\t\tcatid: this.category._id,\n\t\t\t\tname,\n\t\t\t\tdesc\n\t\t\t});\n\t\t\tif (res) {\n\t\t\t\tUI.message.success(this.$t(\"修改_成功\", { title: \"分类\" }).label);\n\t\t\t} else {\n\t\t\t\tthrow new Error(\"\");\n\t\t\t}\n\t\t}\n\t},\n\trender() {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<div class=\"g-row flex1 height100 \">\n\t\t\t\t\t<xGap t=\"10\" />\n\t\t\t\t\t<xForm\n\t\t\t\t\t\tclass=\"flex vertical\"\n\t\t\t\t\t\tlabelStyle={{ \"min-width\": \"120px\", width: \"unset\" }}>\n\t\t\t\t\t\t{xU.map(this.dataXItem, (configs, prop) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t<xGap t=\"10\" />\n\t\t\t\t\t\t\t\t\t<xItem configs={configs} />\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</xForm>\n\t\t\t\t\t<xGap b=\"38\" />\n\t\t\t\t</div>\n\t\t\t\t<xDialogFooter\n\t\t\t\t\tconfigs={{\n\t\t\t\t\t\tonCancel: this.propDialogOptions.closeDialog,\n\t\t\t\t\t\tonOk: this.onOk\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</>\n\t\t);\n\t}\n});\n","import { xU } from \"@ventose/ui\";\nexport const usefnObserveDomResize = () => {\n\tfunction fnObserveDomResize($el, callback) {\n\t\t//初始化这个观察类 如果有变化了 那么就调用二chart的resize方法改变大小\n\t\tthis.resizeObserver = new ResizeObserver(callback);\n\t\t// this.resizeObserver = new ResizeObserver(xU.debounce(callback, 300));\n\t\tthis.resizeObserver.observe($el); //观察这个dom\n\t}\n\tfunction fnUnobserveDomResize($el) {\n\t\tthis.resizeObserver.unobserve($el);\n\t}\n\n\treturn {\n\t\tfnObserveDomResize,\n\t\tfnUnobserveDomResize\n\t};\n};\n","import {\n\tvalidateForm,\n\tAllWasWell,\n\tpickValueFrom,\n\tUI,\n\tdefItem,\n\txU,\n\tsetValueTo\n} from \"@ventose/ui\";\nimport { defineComponent, markRaw } from \"vue\";\nimport { API } from \"../../../api\";\nimport { State_App } from \"../../../state/State_App\";\nimport { Methods_Project, State_Project } from \"./State_Project\";\nimport { FormRules } from \"../../../utils/common.FormRules\";\nimport { ITEM_OPTIONS } from \"../../../utils/common.options\";\n\nexport const DialogAddInterface = defineComponent({\n\tprops: {\n\t\t/* Dialog 默认传入参数 */\n\t\tpropDialogOptions: {\n\t\t\ttype: Object,\n\t\t\tdefault() {\n\t\t\t\treturn { __elId: false };\n\t\t\t}\n\t\t}\n\t},\n\tsetup() {\n\t\treturn { State_App };\n\t},\n\tdata() {\n\t\tconst vm = this;\n\t\treturn {\n\t\t\t...defItem({\n\t\t\t\tvalue: \"\",\n\t\t\t\titemType: \"Select\",\n\t\t\t\tprop: \"apiMethod\",\n\t\t\t\toptions: ITEM_OPTIONS.httpMethod,\n\t\t\t\trules: [FormRules.required()],\n\t\t\t\tonce() {\n\t\t\t\t\tthis.value = xU.first(this.options).value;\n\t\t\t\t},\n\t\t\t\tstyle: { width: \"120px\" }\n\t\t\t}),\n\t\t\tdataXItem: {\n\t\t\t\t...defItem({\n\t\t\t\t\tvalue: \"\",\n\t\t\t\t\titemType: \"Select\",\n\t\t\t\t\tprop: \"catid\",\n\t\t\t\t\tlabel: vm.$t(\"接口分类\").label,\n\t\t\t\t\tplaceholder: \"分类名称\",\n\t\t\t\t\toptions: [],\n\t\t\t\t\trules: [FormRules.required()],\n\t\t\t\t\tonce() {\n\t\t\t\t\t\tthis.options = State_Project.allCategory;\n\t\t\t\t\t\t/* 默认在点击的分类下添加新接口 */\n\t\t\t\t\t\tif (vm.propDialogOptions.categoryId) {\n\t\t\t\t\t\t\tthis.value = vm.propDialogOptions.categoryId;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.value = xU.first(this.options).value;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t\t...defItem({\n\t\t\t\t\tvalue: \"\",\n\t\t\t\t\tprop: \"title\",\n\t\t\t\t\tlabel: vm.$t(\"接口名称\").label,\n\t\t\t\t\tplaceholder: vm.$t(\"接口名称\").label,\n\t\t\t\t\trules: [\n\t\t\t\t\t\tFormRules.required(),\n\t\t\t\t\t\tFormRules.nameLength({ label: vm.$t(\"接口\").label })\n\t\t\t\t\t]\n\t\t\t\t}),\n\t\t\t\t...defItem({\n\t\t\t\t\tvalue: \"/\",\n\t\t\t\t\tprop: \"path\",\n\t\t\t\t\tlabel: vm.$t(\"接口路径\").label,\n\t\t\t\t\tplaceholder: \"/path\",\n\t\t\t\t\trules: [FormRules.required(), FormRules.apiPath()],\n\t\t\t\t\tonce() {\n\t\t\t\t\t\tconst vDomApiMethodsSelector = <xItem configs={vm.apiMethod} />;\n\t\t\t\t\t\tthis.slots = markRaw({\n\t\t\t\t\t\t\taddonBefore: () => vDomApiMethodsSelector\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t};\n\t},\n\tmounted() {\n\t\tthis.propDialogOptions.vm = this;\n\t},\n\tmethods: {\n\t\tasync onOk() {\n\t\t\tconst validateResults = await validateForm(this.dataXItem);\n\t\t\tif (AllWasWell(validateResults)) {\n\t\t\t\tconst { catid, title, path } = pickValueFrom(this.dataXItem);\n\t\t\t\tconst { projectId, closeDialog } = this.propDialogOptions;\n\t\t\t\ttry {\n\t\t\t\t\tconst res = await API.project.addInterface({\n\t\t\t\t\t\tproject_id: projectId,\n\t\t\t\t\t\tcatid,\n\t\t\t\t\t\ttitle,\n\t\t\t\t\t\tpath,\n\t\t\t\t\t\tmethod: this.apiMethod.value\n\t\t\t\t\t});\n\t\t\t\t\tif (res) {\n\t\t\t\t\t\tMethods_Project.updateInterfaceMenuList();\n\t\t\t\t\t\tUI.message.success(\"添加接口成功\");\n\t\t\t\t\t\tcloseDialog();\n\t\t\t\t\t}\n\t\t\t\t} catch (error) {\n\t\t\t\t\tUI.message.error(\"添加失败\");\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\trender() {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<div class=\"g-row flex1 height100\">\n\t\t\t\t\t<xGap t=\"10\" />\n\t\t\t\t\t<aAlert\n\t\t\t\t\t\tmessage={this.$t(\"注： 详细的接口数据可以在编辑页面中添加\").label}\n\t\t\t\t\t\ttype=\"info\"\n\t\t\t\t\t\tclosable\n\t\t\t\t\t\tclassName=\"width100\"\n\t\t\t\t\t/>\n\t\t\t\t\t<xForm\n\t\t\t\t\t\tclass=\"flex vertical\"\n\t\t\t\t\t\tlabelStyle={{ \"min-width\": \"120px\", width: \"unset\" }}>\n\t\t\t\t\t\t{xU.map(this.dataXItem, (configs, prop) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t<xGap t=\"10\" />\n\t\t\t\t\t\t\t\t\t<xItem configs={configs} />\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</xForm>\n\t\t\t\t\t<xGap t=\"10\" />\n\t\t\t\t</div>\n\t\t\t\t<xDialogFooter\n\t\t\t\t\tconfigs={{\n\t\t\t\t\t\tonCancel: this.propDialogOptions.closeDialog,\n\t\t\t\t\t\tonOk: this.onOk\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</>\n\t\t);\n\t}\n});\n","import { defineComponent, ref, watch } from \"vue\";\nimport { $, xU, UI } from \"@ventose/ui\";\nimport { DialogUpsertCategory } from \"./DialogUpsertCategory\";\nimport { usefnObserveDomResize } from \"../../../compositions/useDomResize\";\nimport { API } from \"../../../api\";\nimport { ALL, DefaultInterfaceMenu } from \"../../../utils/variable\";\nimport { Methods_Project, State_Project } from \"./State_Project\";\nimport { DialogAddInterface } from \"./DialogAddInterface\";\nimport { Cpt_url } from \"../../../router/router\";\nimport { AntTreeNodeDropEvent } from \"ant-design-vue/lib/tree/Tree\";\nimport { _$arrayChangeIndex } from \"../../../utils/common\";\n\nexport const ProjectInterfaceLeftSider = defineComponent({\n\tsetup() {\n\t\tconst { fnObserveDomResize, fnUnobserveDomResize } =\n\t\t\tusefnObserveDomResize();\n\t\treturn {\n\t\t\tState_Project: State_Project,\n\t\t\tCpt_url,\n\t\t\tfnObserveDomResize,\n\t\t\tfnUnobserveDomResize\n\t\t};\n\t},\n\twatch: {\n\t\tfilterText(text) {\n\t\t\tthis.State_Project.isLoading = true;\n\t\t\tthis.setFilterText(text);\n\t\t}\n\t},\n\tdata(vm) {\n\t\treturn {\n\t\t\tconfigsResize: {\n\t\t\t\tonMoving({ clickEvent, movingEvent, clickInfo }) {\n\t\t\t\t\tconst { left: leftStart } = clickInfo;\n\t\t\t\t\tlet left = 16 + leftStart + movingEvent.clientX - clickEvent.clientX;\n\t\t\t\t\tif (left < 100) {\n\t\t\t\t\t\tleft = 100;\n\t\t\t\t\t}\n\t\t\t\t\tvm.styleAside.width = `${left}px`;\n\t\t\t\t}\n\t\t\t},\n\t\t\tstyleAside: {\n\t\t\t\twidth: \"300px\",\n\t\t\t\tposition: \"relative\"\n\t\t\t},\n\t\t\tfilterText: \"\",\n\t\t\tselectedKeys: [ALL],\n\t\t\tsiderHeight: 500,\n\t\t\tconfigs: {\n\t\t\t\tfieldNames: {\n\t\t\t\t\tchildren: \"list\",\n\t\t\t\t\tkey: \"_id\"\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t},\n\tmounted() {\n\t\tthis.fnObserveDomResize(this.$refs.wrapper, () => {\n\t\t\t/* mt mb 共计20 */\n\t\t\tconst siderHeight = Math.floor($(this.$refs.wrapper).height()) - 20;\n\t\t\tthis.setSiderHeight(siderHeight);\n\t\t});\n\t\tMethods_Project.updateInterfaceMenuList();\n\t\tMethods_Project.setExpand();\n\t},\n\tbeforeUnmount() {\n\t\tthis.fnUnobserveDomResize(this.$refs.wrapper);\n\t},\n\tcomputed: {\n\t\tcurrentSelectedMenu() {\n\t\t\tconst { pathname, query } = this.Cpt_url;\n\t\t\tconst StrategyMap = {\n\t\t\t\t\"/project/interface/all\": ALL,\n\t\t\t\t\"/project/interface/category\": query.category_id,\n\t\t\t\t\"/project/interface/detail\": query.interface_id\n\t\t\t};\n\t\t\treturn StrategyMap[pathname];\n\t\t},\n\t\ttreeData() {\n\t\t\treturn DefaultInterfaceMenu.concat(this.State_Project.allCategory);\n\t\t},\n\t\tvDomTree() {\n\t\t\tconst vm = this;\n\t\t\treturn (\n\t\t\t\t<div\n\t\t\t\t\tclass=\"elevation-2 height100 padding10\"\n\t\t\t\t\tstyle=\"border-radius: 8px;\">\n\t\t\t\t\t<aTree\n\t\t\t\t\t\tv-model:expandedKeys={vm.State_Project.expandedKeys}\n\t\t\t\t\t\theight={vm.siderHeight}\n\t\t\t\t\t\ttreeData={vm.treeData}\n\t\t\t\t\t\tdraggable\n\t\t\t\t\t\tonDrop={vm.handleDropInterface}\n\t\t\t\t\t\tfieldNames={vm.configs.fieldNames}>\n\t\t\t\t\t\t{{\n\t\t\t\t\t\t\ttitle(item) {\n\t\t\t\t\t\t\t\tconst { title, _id, list, menuType, categoryId } = item;\n\t\t\t\t\t\t\t\tconst classContentString = (() => {\n\t\t\t\t\t\t\t\t\tlet _classString = \"flex middle Interfacesider-tree_menu\";\n\t\t\t\t\t\t\t\t\tif (String(_id) == String(vm.currentSelectedMenu)) {\n\t\t\t\t\t\t\t\t\t\treturn _classString + \" Interfacesider-tree_menu_active\";\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn _classString;\n\t\t\t\t\t\t\t\t})();\n\n\t\t\t\t\t\t\t\tconst handleClickMenuItem = () => {\n\t\t\t\t\t\t\t\t\tif (menuType === ALL) {\n\t\t\t\t\t\t\t\t\t\tCpt_url.value.go(\n\t\t\t\t\t\t\t\t\t\t\t\"/project/interface/all\",\n\t\t\t\t\t\t\t\t\t\t\txU.omit(Cpt_url.value.query, [\n\t\t\t\t\t\t\t\t\t\t\t\t\"category_id\",\n\t\t\t\t\t\t\t\t\t\t\t\t\"interface_id\"\n\t\t\t\t\t\t\t\t\t\t\t])\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t} else if (menuType === \"category\") {\n\t\t\t\t\t\t\t\t\t\tCpt_url.value.go(\"/project/interface/category\", {\n\t\t\t\t\t\t\t\t\t\t\t...Cpt_url.value.query,\n\t\t\t\t\t\t\t\t\t\t\tcategory_id: _id\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tCpt_url.value.go(\"/project/interface/detail\", {\n\t\t\t\t\t\t\t\t\t\t\t...Cpt_url.value.query,\n\t\t\t\t\t\t\t\t\t\t\tcategory_id: categoryId,\n\t\t\t\t\t\t\t\t\t\t\tinterface_id: _id\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tvm.setSelectedKeys(_id);\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\tconst genIcon = ({ icon, tips, clickHandler }) => {\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t<xIcon\n\t\t\t\t\t\t\t\t\t\t\t\ticon={icon}\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"Interfacesider-tree_menu_icon\"\n\t\t\t\t\t\t\t\t\t\t\t\tv-uiPopover={{ content: tips, delay: 1000 }}\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={clickHandler}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t<xGap l=\"8\" />\n\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\tif (menuType === ALL) {\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tdata-interface-all-menu\n\t\t\t\t\t\t\t\t\t\t\tclass={classContentString}\n\t\t\t\t\t\t\t\t\t\t\tonClick={handleClickMenuItem}>\n\t\t\t\t\t\t\t\t\t\t\t<xGap l=\"10\" />\n\t\t\t\t\t\t\t\t\t\t\t<xIcon icon=\"allCategory\" />\n\t\t\t\t\t\t\t\t\t\t\t<span class=\"Interfacesider-tree_menu_title\">\n\t\t\t\t\t\t\t\t\t\t\t\t{title}\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"flex middle Interfacesider-tree_menu_opration\">\n\t\t\t\t\t\t\t\t\t\t\t\t{genIcon({\n\t\t\t\t\t\t\t\t\t\t\t\t\ticon: \"add\",\n\t\t\t\t\t\t\t\t\t\t\t\t\ttips: vm.$t(\"添加分类\").label,\n\t\t\t\t\t\t\t\t\t\t\t\t\tclickHandler: () => vm.showUpsertCategoryDialog()\n\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t\t{genIcon({\n\t\t\t\t\t\t\t\t\t\t\t\t\ticon: \"refresh\",\n\t\t\t\t\t\t\t\t\t\t\t\t\ttips: vm.$t(\"刷新\").label,\n\t\t\t\t\t\t\t\t\t\t\t\t\tclickHandler: Methods_Project.updateInterfaceMenuList\n\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif (xU.isArray(list)) {\n\t\t\t\t\t\t\t\t\t/* { \"edit_uid\": 0, \"status\": \"undone\", \"isProxy\": false, \"witchEnv\": \"\", \"index\": 0, \"tag\": [], \"_id\": 9, \"method\": \"GET\", \"catid\": 56, \"title\": \"first\", \"path\": \"/aws_ecs/goku/rest/vdc/v3.1/projects\", \"project_id\": 83, \"uid\": 12, \"add_time\": 1669122695, \"up_time\": 1669122695 } */\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tconst vDomOpration = (() => {\n\t\t\t\t\t\t\t\t\tif (menuType === \"category\") {\n\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"flex middle Interfacesider-tree_menu_opration\">\n\t\t\t\t\t\t\t\t\t\t\t\t{genIcon({\n\t\t\t\t\t\t\t\t\t\t\t\t\ticon: \"add\",\n\t\t\t\t\t\t\t\t\t\t\t\t\ttips: vm.$t(\"添加接口\").label,\n\t\t\t\t\t\t\t\t\t\t\t\t\tclickHandler: $event =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvm.showAddInterfaceDialog(_id, $event)\n\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t\t{genIcon({\n\t\t\t\t\t\t\t\t\t\t\t\t\ticon: \"edit\",\n\t\t\t\t\t\t\t\t\t\t\t\t\ttips: vm.$t(\"修改分类\").label,\n\t\t\t\t\t\t\t\t\t\t\t\t\tclickHandler: $event =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvm.showUpsertCategoryDialog(item)\n\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t\t{genIcon({\n\t\t\t\t\t\t\t\t\t\t\t\t\ticon: \"delete\",\n\t\t\t\t\t\t\t\t\t\t\t\t\ttips: vm.$t(\"删除分类\").label,\n\t\t\t\t\t\t\t\t\t\t\t\t\tclickHandler: $event => vm.deleteCategory(_id, $event)\n\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"flex middle Interfacesider-tree_menu_opration\">\n\t\t\t\t\t\t\t\t\t\t\t\t{genIcon({\n\t\t\t\t\t\t\t\t\t\t\t\t\ticon: \"delete\",\n\t\t\t\t\t\t\t\t\t\t\t\t\ttips: vm.$t(\"删除接口\").label,\n\t\t\t\t\t\t\t\t\t\t\t\t\tclickHandler: $event =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvm.showAddInterfaceDialog(_id, $event)\n\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})();\n\n\t\t\t\t\t\t\t\tlet iconName = \"subCategoryInterface\";\n\t\t\t\t\t\t\t\tif (menuType === \"category\") {\n\t\t\t\t\t\t\t\t\ticonName = \"subCategory\";\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<div class={classContentString} onClick={handleClickMenuItem}>\n\t\t\t\t\t\t\t\t\t\t<xGap l=\"10\" />\n\t\t\t\t\t\t\t\t\t\t<xIcon icon={iconName} />\n\t\t\t\t\t\t\t\t\t\t<span class=\"Interfacesider-tree_menu_title\">{title}</span>\n\t\t\t\t\t\t\t\t\t\t{vDomOpration}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\t\t\t\t\t</aTree>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\t},\n\tmethods: {\n\t\tasync handleDropInterface(e: AntTreeNodeDropEvent) {\n\t\t\tthis.State_Project.isLoading = true;\n\t\t\t/*\n\t\t\t1.drag interface\n\t\t\t\t1.1 drop 到同一个category\n\t\t\t\t1.2 drop 到不同category\n\t\t\t2.drag category\n\t\t\t\t2.1 调整 category 顺序\n\t\t\t*/\n\t\t\tconst dragItem = e.dragNode;\n\t\t\tconst dropItem = e.node;\n\t\t\tconst isDragInterface = dragItem.menuType === \"interface\";\n\t\t\tconst isDropSameCategory = dragItem.categoryId === dropItem.categoryId;\n\n\t\t\tconst params = { dragItem, dropItem };\n\n\t\t\ttry {\n\t\t\t\tif (isDragInterface) {\n\t\t\t\t\tif (isDropSameCategory) {\n\t\t\t\t\t\tawait this.switchSameCategoryInterfaceOrder(params);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tawait this.switchDiffCategoryInterfaceOrder(params);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tawait this.switchCategoryOrder(params);\n\t\t\t\t}\n\t\t\t\tMethods_Project.updateInterfaceMenuList();\n\t\t\t} catch (error) {\n\t\t\t\tUI.message.error(error.message);\n\t\t\t} finally {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.State_Project.isLoading = false;\n\t\t\t\t}, 400);\n\t\t\t}\n\t\t},\n\t\t/* 同类 interface */\n\t\tasync switchSameCategoryInterfaceOrder({ dragItem, dropItem }) {\n\t\t\tconst category = xU.find(this.State_Project.allCategory, {\n\t\t\t\t_id: dragItem.categoryId\n\t\t\t});\n\t\t\tconst paramsChanges = _$arrayChangeIndex(\n\t\t\t\tcategory.list,\n\t\t\t\tdragItem._id,\n\t\t\t\tdropItem._id\n\t\t\t);\n\t\t\tawait API.project.switchManyInterfaceOrder(paramsChanges);\n\t\t},\n\t\t/* interface 换 category */\n\t\tasync switchDiffCategoryInterfaceOrder({ dragItem, dropItem }) {\n\t\t\tawait API.project.updateInterface({\n\t\t\t\tid: dragItem._id,\n\t\t\t\tcatid: dropItem.categoryId\n\t\t\t});\n\t\t},\n\t\tasync switchCategoryOrder({ dragItem, dropItem }) {\n\t\t\tconst paramsChanges = _$arrayChangeIndex(\n\t\t\t\tthis.State_Project.allCategory,\n\t\t\t\tdragItem._id,\n\t\t\t\tdropItem._id\n\t\t\t);\n\t\t\tawait API.project.switchManyCategoryOrder(paramsChanges);\n\t\t},\n\t\tsetFilterText: xU.debounce(function (filterText) {\n\t\t\tthis.State_Project.filterText = filterText;\n\t\t\tthis.State_Project.isLoading = false;\n\t\t}, 600),\n\t\tsetSelectedKeys(id) {\n\t\t\tthis.selectedKeys = [id];\n\t\t},\n\t\t/* vDomList 需要实际高度 */\n\t\tsetSiderHeight: xU.debounce(function (siderHeight) {\n\t\t\tthis.siderHeight = siderHeight;\n\t\t}, 20),\n\t\tdeleteCategory(id) {\n\t\t\tconst vm = this;\n\t\t\tUI.dialog.confirm({\n\t\t\t\ttitle: \"确定删除此接口分类吗？\",\n\t\t\t\tcontent: `温馨提示：该操作会删除该分类下所有接口，接口删除后无法恢复`,\n\t\t\t\tasync onOk() {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tawait API.project.deleteInterfaceCategoryById(id);\n\t\t\t\t\t\tUI.message.success(\"删除分类成功\");\n\t\t\t\t\t\tMethods_Project.updateInterfaceMenuList();\n\t\t\t\t\t\tvm.Cpt_url.go(\n\t\t\t\t\t\t\t\"/project/interface/all\",\n\t\t\t\t\t\t\txU.omit(vm.Cpt_url.query, [\"category_id\"])\n\t\t\t\t\t\t);\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\tUI.message.error(error.message);\n\t\t\t\t\t\treturn Promise.reject();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tshowUpsertCategoryDialog(category = false) {\n\t\t\tUI.dialog.component({\n\t\t\t\ttitle: category ? this.$t(\"修改分类\").label : this.$t(\"添加分类\").label,\n\t\t\t\tcomponent: DialogUpsertCategory,\n\t\t\t\tcategory\n\t\t\t});\n\t\t},\n\t\tshowAddInterfaceDialog(categoryId, $event: Event) {\n\t\t\t$event.stopPropagation();\n\t\t\t$event.preventDefault();\n\t\t\tUI.dialog.component({\n\t\t\t\ttitle: this.$t(\"添加接口\").label,\n\t\t\t\tcategoryId,\n\t\t\t\tprojectId: this.State_App.currProject._id,\n\t\t\t\tcomponent: DialogAddInterface\n\t\t\t});\n\t\t}\n\t},\n\trender() {\n\t\treturn (\n\t\t\t<aside\n\t\t\t\tclass=\"ViewProject-sider_wrapper flex vertical move-transition padding10\"\n\t\t\t\tstyle={this.styleAside}>\n\t\t\t\t<div class=\"ViewProjectInterface_tree flex1 mt10 mb10\" ref=\"wrapper\">\n\t\t\t\t\t{this.vDomTree}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"resize_bar\" icon=\"scroll\" v-uiMove={this.configsResize} />\n\t\t\t</aside>\n\t\t);\n\t}\n});\n","import { defineComponent } from \"vue\";\nimport { State_App } from \"../../../state/State_App\";\nimport { Cpt_url } from \"../../../router/router\";\nimport \"./interface.scss\";\nimport { ProjectInterfaceLeftSider } from \"./ProjectInterfaceLeftSider\";\nimport { xU } from \"@ventose/ui\";\nimport { State_Project, Methods_Project } from \"./State_Project\";\n\nexport const ProjectInterface = defineComponent({\n\tcomponents: {\n\t\tProjectInterfaceLeftSider\n\t},\n\tsetup() {\n\t\treturn {\n\t\t\tState_App,\n\t\t\tState_Project: State_Project,\n\t\t\tCpt_url\n\t\t};\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tstate: {}\n\t\t};\n\t},\n\tcreated() {\n\t\tMethods_Project.resetURL();\n\t},\n\tmethods: {},\n\trender() {\n\t\treturn (\n\t\t\t<section\n\t\t\t\tid=\"ViewProjectInterface\"\n\t\t\t\tv-loading={this.State_Project.isLoading}>\n\t\t\t\t<ProjectInterfaceLeftSider />\n\t\t\t\t<main class=\"flex flex1 padding10\" style=\"width:1px;\">\n\t\t\t\t\t<RouterView class=\"flex flex1 width100 height100 vertical padding10\" />\n\t\t\t\t</main>\n\t\t\t</section>\n\t\t);\n\t}\n});\n"],"names":["_isSlot","_isVNode","DialogUpsertCategory","defineComponent","props","propDialogOptions","type","Object","default","__elId","setup","State_App","data","dataXItem","defItem","value","prop","label","placeholder","rules","FormRules","required","isTextarea","showCount","maxlength","mounted","vm","initForm","computed","category","methods","setValueTo","onOk","validateResults","validateForm","AllWasWell","name","desc","pickValueFrom","project_id","currProject","_id","updateOldCategory","insertNewCategory","Methods_Project","updateInterfaceMenuList","closeDialog","error","UI","message","$t","title","res","API","project","addInterfaceCategory","success","Error","updateInterfaceCategory","catid","render","_createVNode","_Fragment","_resolveComponent","width","xU","map","configs","onCancel","DialogAddInterface","itemType","options","ITEM_OPTIONS","httpMethod","once","first","style","State_Project","allCategory","categoryId","nameLength","apiPath","vDomApiMethodsSelector","apiMethod","slots","markRaw","addonBefore","path","projectId","addInterface","method","ProjectInterfaceLeftSider","fnObserveDomResize","fnUnobserveDomResize","usefnObserveDomResize","Cpt_url","watch","filterText","text","isLoading","setFilterText","configsResize","onMoving","clickEvent","movingEvent","clickInfo","left","leftStart","clientX","styleAside","position","selectedKeys","ALL","siderHeight","fieldNames","children","key","$refs","wrapper","Math","floor","$","height","setSiderHeight","setExpand","beforeUnmount","currentSelectedMenu","pathname","query","StrategyMap","category_id","interface_id","treeData","DefaultInterfaceMenu","concat","vDomTree","expandedKeys","handleDropInterface","item","list","menuType","classContentString","_classString","String","handleClickMenuItem","go","omit","setSelectedKeys","genIcon","icon","tips","clickHandler","_withDirectives","_resolveDirective","content","delay","showUpsertCategoryDialog","isArray","vDomOpration","$event","showAddInterfaceDialog","deleteCategory","iconName","e","dragItem","dragNode","dropItem","node","isDragInterface","isDropSameCategory","params","switchSameCategoryInterfaceOrder","switchDiffCategoryInterfaceOrder","switchCategoryOrder","setTimeout","find","paramsChanges","_$arrayChangeIndex","switchManyInterfaceOrder","updateInterface","id","switchManyCategoryOrder","debounce","dialog","confirm","deleteInterfaceCategoryById","Promise","reject","component","stopPropagation","preventDefault","ProjectInterface","components","state","created","resetURL"],"mappings":"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"}